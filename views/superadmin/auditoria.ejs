<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logs de Auditoría - RestaurantPro</title>
    <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/vendor/bootstrap-icons/bootstrap-icons.css">
</head>
<body style="background-color: #f8f9fa;">
    <%- include('../partials/navbar_superadmin') %>

    <div class="container mt-4">
        <div class="card border-0 shadow-sm">
            <div class="card-header bg-white border-bottom">
                <h5 class="mb-0"><i class="bi bi-journal-text me-2"></i>Logs de Auditoría</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover table-sm">
                        <thead class="table-light">
                            <tr>
                                <th>Fecha</th>
                                <th>Usuario</th>
                                <th>Restaurante</th>
                                <th>Acción</th>
                                <th>Tabla</th>
                                <th>Registro ID</th>
                                <th>IP</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% logs.forEach(log => { %>
                            <tr>
                                <td><%= new Date(log.created_at).toLocaleString() %></td>
                                <td><%= log.usuario_nombre || 'Sistema' %></td>
                                <td><%= log.restaurante_nombre || 'N/A' %></td>
                                <td><span class="badge bg-primary"><%= log.accion %></span></td>
                                <td><%= log.tabla %></td>
                                <td><%= log.registro_id || '-' %></td>
                                <td><small><%= log.ip_address || '-' %></small></td>
                            </tr>
                            <% }); %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="/vendor/jquery/jquery.min.js"></script>
    <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>
</html>
